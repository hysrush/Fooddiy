<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<ul class="list list-icons list-primary list-borders">

	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_lettuce.jpg" />
								<strong class = "name">&nbsp;양상추 </strong><strong class = "id">Lettuce</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_tomato.jpg" /> 
								<strong class = "name">&nbsp;토마토 </strong><strong class = "id">Tommatoes</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>	
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_cucumber.jpg" />
								<strong class = "name">&nbsp;오이 </strong><strong class = "id">Cucumbers</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_capsicum.jpg" />
								<strong class = "name">&nbsp;피망 </strong><strong class = "id">Capsicum</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_onion.jpg" />
								<strong class = "name">&nbsp;양파 </strong><strong class = "id">Red Onion</strong>
							</td>
						</tr>
					</tbody>
				</table>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_pickles.jpg" />
								<strong class = "name">&nbsp;피클 </strong><strong class = "id">Pickles</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_olives.jpg" />
								<strong class = "name">&nbsp;올리브 </strong><strong class = "id">Olives</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
	<li><i class="fa fa-check fa-check-vegetable"></i>
		<figure class="product-image-area product-vegetable-area">
				<table>	
					<tbody>
						<tr>
							<td width="90%">
								<img style="width: 80px;" src="${ pageContext.request.contextPath }/resources/img/vegetable/mobile/vegetable_jalapenos.jpg" />
								<strong class = "name">&nbsp;할라피뇨 </strong><strong class = "id">Jalapenos</strong>
							</td>
						</tr>
					</tbody>
				</table>
				<div class = "row button-family" style="text-align: center;">
						<button type="button" class="btn mr-xs mb-sm less">적게</button>
						<button type="button" class="btn mr-xs mb-sm nomal">보통</button>
						<button type="button" class="btn mr-xs mb-sm more">많이</button>
				</div>
		</figure>
	</li>
</ul>


<div class="modal vegetable-modal" id="noAnimModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true" style="display: none;">
		<div class="modal-dialog" style="top: 30%">
				<div class="modal-content">
						<div class="modal-header" style="background-color: #7aa93c; padding: 10px 20px 10px 10px">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="color: white; font-size: 30px">×</button>
								<h4 class="modal-title" id="noAnimModalLabel" style="color: white;">안내</h4>							
						</div>
						<div class="modal-body" style="text-align: center; padding: 20px 20px 20px">
								<p>야채는 2개까지 추가할 수 있습니다.</p>
						</div>
						<div class="modal-footer" style="margin-top: 0px; padding: 10px 20px 20px;">
								<button type="button" class="btn btn-default" data-dismiss="modal" style="color: white; background-color: #7aa93c;">확인</button>
						</div>
				</div>
		</div>
</div>

<script>
	$(document).ready(function() {
		
		$('li .product-vegetable-area').each(function() {
			
			var name = $(this).find('.name').text(); 
			var id  =  $(this).find('.id').text().split(' ');
			
			if(id.length == 1) {
				id = id[0];
			}else {
				id = id[0] + id[1];
			}
			
			var tr = $(this).find('tr');
			var more = $(this).find('.more');
			var less = $(this).find('.less');
			var nomal= $(this).find('.nomal');
			
			
			
			$(tr).click(function() {
				if(!$(this).data('clickStatus')) {
					$(this).parents('.product-vegetable-area').prev().hide();
					$(this).parents('table').next().hide();
					
					$(nomal).css({
						'color' : 'white',
						'background-color' : '#7aa93c'
					});
					$(less).css({
						'color' : '#7aa93c',
						'background-color' : 'white',
						'border-color' : '#7aa93c'
					});
					$(more).css({
						'color' : '#7aa93c',
						'background-color' : 'white',
						'border-color' : '#7aa93c'
					});
					
					
					var td = '<td class="' + 'vegetable-name"' + '">';
					td += '<strong class = "'+ 'name">  ' + name + id + '</strong>';
					td += '</td>';
					td += '<td class = "'+ 'vegetable-plus-minus">' + '(빼기)';
					td += '</td>';
					
					var row =  '<tr class = "'+ id + '">';
 					row += '<td width ="' + '30%"> </td>'
 					row += '<td class="' + 'vegetable-name">';
					row += '<strong class = "'+ 'name">'+ name + id + '</strong>';
					row += '</td>';
					row += '<td class = "'+ 'vegetable-plus-minus">' + '(빼기)' + '</td>';
					row += '</tr>';
					
					
					//첫줄에 아무것도 없을 때 추가 
					if($('.vegetable-table tr').children().length == 1) {
						$('.vegetable-table tr').addClass(id);
						$('.vegetable-table tr').append(td);
					}else { 
												
						var flag = 1;
						$('.vegetable-table tr').each(function(index) {
							
							if($(this).hasClass(id)) {
								
								if(index == 0 ) { // 첫번째에 존재하는것을 제거하고 추가
									var tr = $('.vegetable-table tr');
									var remove_td = $(this).children();
									for(var i = 1; i < remove_td.length; ++i) {
										$(remove_td[i].remove());
									}
									
									$(tr[0]).append(td);
								}
								else {  //첫번째 줄 이외에 존재하는 것을 제거하고 추가
									$(this).remove();
									$('.vegetable-table').append(row);
								}
								
								flag = 0;
							}
						});
						
						
						//제거할것이 없으면 마지막에 추가
						if(flag) {
							$('.vegetable-table').append(row);
						}
					}
					
					$(this).data('clickStatus', 1);
				}
				else {
					$(this).parents('.product-vegetable-area').prev().show();
					$(this).parents('table').next().show();
					
					var tr  = $('.vegetable-table tbody tr');
	 				
					if(tr.length == 1) {
						var td = $(tr[0]).children();
												
						for(var i = 1; i <= td.length; ++i){
							$(td[i]).remove();
						}
						
						$(tr[0]).removeClass(id);
					}
					else {
						if($(tr[0]).attr('class') == id) {
							var tr_child = $(tr[1]).children();
							$(tr_child[0]).text('야채 선택>>');
							$(tr[0]).remove();
							
						}else {
							$('table.vegetable-table .'+id).remove();
						}
					}
					
					$(this).data('clickStatus', 0);
				}
			});
			
			
			/////////////////////////////////////////////////////////////////////////////
			
			
			$(less).click(function() {
				$(this).css({
					'color' : 'white',
					'background-color' : '#7aa93c'
				});
				$(this).next().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				$(this).next().next().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				
				var td = '<td class="' + 'vegetable-name"' + '">';
				td += '<strong class = "'+ 'name">  ' + name + id + '</strong>';
				td += '</td>';
				td += '<td class = "'+ 'vegetable-plus-minus">' + '(적게)';
				td += '</td>';
				
				var row =  '<tr class = "'+ id + '">';
				row += '<td width ="' + '30%"> </td>'
				row += '<td class="' + 'vegetable-name">';
				row += '<strong class = "'+ 'name">'+ name + id + '</strong>';
				row += '</td>';
				row += '<td class = "'+ 'vegetable-plus-minus">' + '(적게)' + '</td>';
				row += '</tr>';
				
				var flag = 1; 
				//아무것도 없으면				
				if($('.vegetable-table tr').children().length == 1) {
						$('.vegetable-table tr').addClass(id);
						$('.vegetable-table tr').append(td);
				}
				else {
					$('.vegetable-table tr').each(function(index) {
						
					
						if($(this).hasClass(id)) {
							
							if(index == 0 ) { // 첫번째에 존재하는것을 제거하고 추가
								
								var remove_td = $(this).children();
								for(var i = 1; i < remove_td.length; ++i) {
									$(remove_td[i].remove());
								}
								
								var tr = $('.vegetable-table tr');
								$(tr[0]).append(td);
							}
							else {  //첫번째 줄 이외에 존재하는 것을 제거하고 추가
								$(this).remove();
								$('.vegetable-table').append(row);
							}
							
							flag = 0;
						}
					});
					
					//존재하지 않으면
					if(flag) {
						$('.vegetable-table').append(row);
					}
				}
			});
			
			/////////////////////////////////////////////////////////////////
			
			$(more).click(function() {
				$(this).css({
					'color' : 'white',
					'background-color' : '#7aa93c'
				});
				$(this).prev().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				$(this).prev().prev().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				
				var td = '<td class="' + 'vegetable-name"' + '">';
				td += '<strong class = "'+ 'name">  ' + name + id + '</strong>';
				td += '</td>';
				td += '<td class = "'+ 'vegetable-plus-minus">' + '(많이)';
				td += '</td>';
				
				var row =  '<tr class = "'+ id + '">';
				row += '<td width ="' + '30%"> </td>'
				row += '<td class="' + 'vegetable-name">';
				row += '<strong class = "'+ 'name">'+ name + id + '</strong>';
				row += '</td>';
				row += '<td class = "'+ 'vegetable-plus-minus">' + '(많이)' + '</td>';
				row += '</tr>';
				
				var flag = 1; 
				//아무것도 없으면				
				if($('.vegetable-table tr').children().length == 1) {
						$('.vegetable-table tr').addClass(id);
						$('.vegetable-table tr').append(td);
				}
				else {
					$('.vegetable-table tr').each(function(index) {
						
					
						if($(this).hasClass(id)) {
							
							if(index == 0 ) { // 첫번째에 존재하는것을 제거하고 추가
								
								var remove_td = $(this).children();
								for(var i = 1; i < remove_td.length; ++i) {
									$(remove_td[i].remove());
								}
								
								var tr = $('.vegetable-table tr');
								$(tr[0]).append(td);
							}
							else {  //첫번째 줄 이외에 존재하는 것을 제거하고 추가
								$(this).remove();
								$('.vegetable-table').append(row);
							}
							
							flag = 0;
						}
					});
					
					//존재하지 않으면
					if(flag) {
						$('.vegetable-table').append(row);
					}
				}
			});
			
			
			/////////////////////////////////////////////////////////////////
			$(nomal).click(function() {
				$(this).css({
					'color' : 'white',
					'background-color' : '#7aa93c'
				});
				$(this).prev().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				$(this).next().css({
					'color' : '#7aa93c',
					'background-color' : 'white',
					'border-color' : '#7aa93c'
				});
				
				var tr  = $('.vegetable-table tbody tr');
 				
				if(tr.length == 1) {
					var td = $(tr[0]).children();
											
					for(var i = 1; i <= td.length; ++i){
						$(td[i]).remove();
					}
					
					$(tr[0]).removeClass(id);
				}
				else {
					if($(tr[0]).attr('class') == id) {
						var tr_child = $(tr[1]).children();
						$(tr_child[0]).text('야채 선택>>');
						$(tr[0]).remove();
						
					}else {
						$('table.vegetable-table .'+id).remove();
					}
				}
				
				$(this).data('clickStatus', 0);
				
			});
		});
		
		
		
		


	});
</script>
